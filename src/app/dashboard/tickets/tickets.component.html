<section class="card  d-flex flex-column gap-20">
  <div class="d-flex justify-content-md-between align-item-center">
    <h2>Ticket Table</h2>
  </div>
</section>

<div class="table-list card">
  <table class="selected-category">
    <thead>
      <tr>
        <th class="items">Serial Number</th>
        <th class="items">Ticket Type</th>
        <th class="items">Ticket Title</th>
        <th class="items">User Name</th>
        <th class="items">User Email</th>
        <th class="items">Status</th>
        <th class="items">Date Created</th>
        <th class="items">Actions</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let item of ticketData; let i = index;">
        <td class="items ellipsis">{{i+1}}</td>
        <td class="items">{{ item.ticketType }}</td>
        <td class="items">{{ item.ticketTitle }}</td>
        <td class="items">{{ item.userName }}</td>
        <td class="items">{{ item.userEmail }}</td>
        <td class="items">{{ item.status }}</td>
        <td class="items">{{ item.dateCreated | date: 'dd/MM/yyyy' }}</td>
        <td class="items">
          <span class="material-symbols-outlined edit-button material-icons pointer" (click)="showItemDetails(item)">
            confirmation_number
            </span>
          <span class="material-symbols-outlined delete-button material-icons pointer"
            (click)="webPush(item)">notifications</span>
          <span class="material-symbols-outlined delete-button material-icons pointer"
            (click)="deleteTicketTitle(item)">delete</span>
        </td>
      </tr>
    </tbody>
  </table>
</div>

  <app-pop-up *ngIf="selectedItem">
  <div class="details-container">
  <!-- Table heading -->
  <div class="table-like">
    <div class="table-cell"><strong>Reply Ticket</strong></div>
  </div>

  <!-- Table body -->
  <div class="table-like">
    <div class="table-row">
      <div class="table-cell"><strong>Email:</strong></div>
      <div class="table-cell">{{ selectedItem.userEmail }}</div>
    </div>
    <div class="table-row">
      <div class="table-cell"><strong>User Query:</strong></div>
      <div class="table-cell">{{ selectedItem.ticketTitle }}</div>
    </div>
    <!-- Add more rows as needed -->
  </div>
    <div class="custom-select" style="width:200px;">
      <!-- <select [(ngModel)]="selectedItem.status">
        <option value="" disabled>Select a Status</option>
        <ng-container *ngFor="let status of uniqueStatusValues">
          <option [value]="status">{{ status }}</option>
        </ng-container>
      </select> -->

      <app-custom-select
      [type]="''"
      [options]="uniqueStatusValues"
      [(ngModel)]="selectedItem.status"
      [selectedOption]="'select Ticket'"
      (final_option)="updateFormFields($event)"
    ></app-custom-select>
    
    <textarea
    [(ngModel)]="messageInput"
    placeholder="Enter your message"
    style="
      margin-top: 10px;
      width: 100%;
      padding: 10px;
      border: 1px solid #ccc;
      border-radius: 5px;
      resize: vertical; /* Allows vertical resizing */
      font-family: 'Arial', sans-serif; /* Change the font if needed */
      font-size: 14px; /* Adjust the font size */
      line-height: 1.5; /* Increase line height for readability */
      transition: border-color 0.3s;
    "
  ></textarea>
  
    </div>
    
    
    <button class="btn-primary" (click)="updateItem()">Update</button>
  </div>
</app-pop-up>

<section  *ngIf="editItem"  class="card d-flex flex-column gap-20">
  <div class="d-flex justify-content-md-between align-item-center">
    <h2>Create Notification</h2>
  </div>

  
  <div class="slider">
    <h5>User Token: {{ token }}</h5>
      <form [formGroup]="notificationForm" (ngSubmit)="sendNotification()">
        <div class="form-group">
          <label for="title">Title:</label>
          <input type="text" id="title" formControlName="title" [(ngModel)]="selectedTicket.title" required>
        </div>
      
        <div class="form-group">
          <label for="body">Body:</label>
          <textarea id="body" formControlName="body" [(ngModel)]="selectedTicket.body" required></textarea>
        </div>
      
        <div class="form-group">
          <label for="icon">Icon URL:</label>
          <input type="text" id="icon" formControlName="icon" [(ngModel)]="selectedTicket.icon" required>
        </div>

        <button type="submit" class="btn-secondary">Send</button>
      </form>
    </div>
</section>
