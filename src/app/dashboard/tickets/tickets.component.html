<div class="table-list card">
  <table class="selected-category">
    <thead>
      <tr>
        <th class="items">Serial Number</th>
        <th class="items">Ticket Type</th>
        <th class="items">Ticket Title</th>
        <th class="items">User Name</th>
        <th class="items">User Email</th>
        <th class="items">Status</th>
        <th class="items">Date Created</th>
        <th class="items">Actions</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let item of ticketData; let i = index;">
        <td class="items ellipsis">{{i+1}}</td>
        <td class="items">{{ item.ticketType }}</td>
        <td class="items">{{ item.ticketTitle }}</td>
        <td class="items">{{ item.userName }}</td>
        <td class="items">{{ item.userEmail }}</td>
        <td class="items">{{ item.status }}</td>
        <td class="items">{{ item.dateCreated | date: 'dd/MM/yyyy' }}</td>
        <td class="items">
          <span class="material-symbols-outlined edit-button material-icons" (click)="showItemDetails(item)">edit</span>
          <span class="material-symbols-outlined delete-button material-icons"
            (click)="webPush(item)">notifications</span>
          <span class="material-symbols-outlined delete-button material-icons"
            (click)="deleteTicketTitle(item)">delete</span>
        </td>
      </tr>
    </tbody>
  </table>
</div>

  <app-pop-up *ngIf="selectedItem">
  <div class="details-container">
    <h2>Update Ticket Status</h2>
    <p><strong>Email:</strong> {{ selectedItem.userEmail }}</p>
    <p><strong>User Query: </strong> {{ selectedItem.ticketTitle }}</p>
    <div class="custom-select" style="width:200px;">
      <select [(ngModel)]="selectedItem.status">
        <option value="" disabled>Select a Status</option>
        <ng-container *ngFor="let status of uniqueStatusValues">
          <option [value]="status">{{ status }}</option>
        </ng-container>
      </select>
  
      <textarea [(ngModel)]="messageInput" placeholder="Enter your message"></textarea>
    </div>
    
    
    <button (click)="updateItem()">Update</button>
    <button (click)="cancelUpdate()">Cancel</button>
  </div>
</app-pop-up>

  <div *ngIf="editItem" class="slider">
    <div class="selectedTicket">
    <h2>Create Notification</h2>
    <form [formGroup]="notificationForm" (ngSubmit)="sendNotification()">
      <h5>User Token: {{ token }}</h5>
      <div class="form-group">
        <label for="title">Title:</label>
        <input type="text" id="title" formControlName="title" [(ngModel)]="selectedTicket.title" required>
      </div>

      <div class="form-group">
        <label for="body">Body:</label>
        <textarea id="body" formControlName="body" [(ngModel)]="selectedTicket.body" required></textarea>
      </div>

      <div class="form-group">
        <label for="icon">Icon URL:</label>
        <input type="text" id="icon" formControlName="icon" [(ngModel)]="selectedTicket.icon" required>
      </div>

      <button type="submit">Send</button>
    </form>
  </div>
  </div>